configfile: "config.yaml"

FAST5_FILES, = glob_wildcards(config['results_folder'] + "DataFiles/fast5/{fast5_files}.fast5")

print(FAST5_FILES)


rule all:
    input:
        expand(config['results_folder'] + "Basecall/{fast5_files}", fast5_files=FAST5_FILES)



rule basecall:
    input:
         config['results_folder'] + "DataFiles/fast5/{fast5_files}.fast5"
    output:
        config['results_folder'] + "Basecall/{fast5_files}"
    shell:
        "ls {input}"
        
        " | "
        
        "guppy_basecaller "
        "--quiet "
        "--save_path {output} "
        "--config dna_r9.4.1_450bps_fast.cfg "
        "--num_callers 1 "
        "--cpu_threads_per_caller 12 "
